{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-manifest-plugin.ts"],"names":["ClientReferenceManifestPlugin","pluginState","getProxiedPluginState","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","getAppPathRequiredChunks","chunkGroup","chunks","map","requiredChunk","SYSTEM_ENTRYPOINTS","has","name","files","file","endsWith","id","flat","filter","nonNullable","entryNameToGroupName","entryName","groupName","slice","lastIndexOf","replace","test","mergeManifest","manifest","manifestToMerge","Object","assign","clientModules","ssrModuleMapping","edgeSSRModuleMapping","entryCSSFiles","PLUGIN_NAME","constructor","options","dev","appDir","appDirBase","path","dirname","sep","Set","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","webpack","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createAsset","context","manifestsPerGroup","Map","manifestEntryFiles","chunkGroups","forEach","chunkEntryName","getFiles","f","startsWith","requiredChunks","recordModule","mod","layer","WEBPACK_LAYERS","appPagesBrowser","resource","type","_identifier","moduleReferences","moduleIdMapping","edgeModuleIdMapping","ssrNamedModuleId","relative","resourceResolveData","isAsyncModule","esmResource","addClientReference","exportName","async","edgeExportName","addSSRIdMapping","chunk","entryMods","chunkGraph","getChunkEntryModulesIterable","request","includes","connections","moduleGraph","getOutgoingConnections","connection","dependency","clientEntryMod","getResolvedModule","modId","getModuleId","module","concatenatedMod","concatenatedModId","push","get","pageName","mergedManifest","segments","split","group","segment","json","JSON","stringify","pagePath","pageBundlePath","normalizePagePath","length","CLIENT_REFERENCE_MANIFEST","sources","RawSource"],"mappings":"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"}
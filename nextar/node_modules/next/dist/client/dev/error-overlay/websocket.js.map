{"version":3,"sources":["../../../../src/client/dev/error-overlay/websocket.ts"],"names":["addMessageListener","sendMessage","connectHMR","source","eventCallbacks","lastActivity","Date","now","getSocketProtocol","assetPrefix","protocol","location","URL","_","cb","push","data","readyState","OPEN","send","options","timeout","init","close","handleOnline","window","console","log","handleMessage","event","forEach","timer","handleDisconnect","clearInterval","onerror","setTimeout","setInterval","hostname","port","replace","url","startsWith","split","WebSocket","path","onopen","onmessage"],"mappings":";;;;;;;;;;;;;;;;IAegBA,kBAAkB;eAAlBA;;IAIAC,WAAW;eAAXA;;IAKAC,UAAU;eAAVA;;;AAxBhB,IAAIC;AACJ,MAAMC,iBAA2C,EAAE;AACnD,IAAIC,eAAeC,KAAKC,GAAG;AAE3B,SAASC,kBAAkBC,WAAmB,EAAU;IACtD,IAAIC,WAAWC,SAASD,QAAQ;IAEhC,IAAI;QACF,uBAAuB;QACvBA,WAAW,IAAIE,IAAIH,aAAaC,QAAQ;IAC1C,EAAE,OAAOG,GAAG,CAAC;IAEb,OAAOH,aAAa,UAAU,OAAO,KAAK;AAC5C;AAEO,SAASV,mBAAmBc,EAAwB,EAAE;IAC3DV,eAAeW,IAAI,CAACD;AACtB;AAEO,SAASb,YAAYe,IAAY,EAAE;IACxC,IAAI,CAACb,UAAUA,OAAOc,UAAU,KAAKd,OAAOe,IAAI,EAAE;IAClD,OAAOf,OAAOgB,IAAI,CAACH;AACrB;AAEO,SAASd,WAAWkB,OAI1B,EAAE;IACD,IAAI,CAACA,QAAQC,OAAO,EAAE;QACpBD,QAAQC,OAAO,GAAG,IAAI;IACxB,CAAC;IAED,SAASC,OAAO;QACd,IAAInB,QAAQA,OAAOoB,KAAK;QAExB,SAASC,eAAe;YACtBC,OAAOC,OAAO,CAACC,GAAG,CAAC;YACnBtB,eAAeC,KAAKC,GAAG;QACzB;QAEA,SAASqB,cAAcC,KAAU,EAAE;YACjCxB,eAAeC,KAAKC,GAAG;YAEvBH,eAAe0B,OAAO,CAAC,CAAChB,KAAO;gBAC7BA,GAAGe;YACL;QACF;QAEA,IAAIE;QACJ,SAASC,mBAAmB;YAC1BC,cAAcF;YACd5B,OAAO+B,OAAO,GAAG,IAAI;YACrB/B,OAAOoB,KAAK;YACZY,WAAWb,MAAMF,QAAQC,OAAO;QAClC;QACAU,QAAQK,YAAY,WAAY;YAC9B,IAAI9B,KAAKC,GAAG,KAAKF,eAAgBe,QAAQC,OAAO,EAAU;gBACxDW;YACF,CAAC;QACH,GAAG,AAACZ,QAAQC,OAAO,GAAW;QAE9B,MAAM,EAAEgB,SAAQ,EAAEC,KAAI,EAAE,GAAG3B;QAC3B,MAAMD,WAAWF,kBAAkBY,QAAQX,WAAW,IAAI;QAC1D,MAAMA,cAAcW,QAAQX,WAAW,CAAC8B,OAAO,CAAC,QAAQ;QAExD,IAAIC,MAAM,AAAG9B,WAAS,QAAK2B,WAAS,MAAGC,OACrC7B,CAAAA,cAAc,AAAC,MAAGA,cAAgB,EAAE,AAAD;QAGrC,IAAIA,YAAYgC,UAAU,CAAC,SAAS;YAClCD,MAAM,AAAG9B,WAAS,QAAKD,YAAYiC,KAAK,CAAC,MAAM,CAAC,EAAE;QACpD,CAAC;QAEDvC,SAAS,IAAIsB,OAAOkB,SAAS,CAAC,AAAC,KAAEH,MAAMpB,QAAQwB,IAAI;QACnDzC,OAAO0C,MAAM,GAAGrB;QAChBrB,OAAO+B,OAAO,GAAGF;QACjB7B,OAAO2C,SAAS,GAAGlB;IACrB;IAEAN;AACF"}
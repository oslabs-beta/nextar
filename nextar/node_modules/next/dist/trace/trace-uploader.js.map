{"version":3,"sources":["../../src/trace/trace-uploader.ts"],"names":["EVENT_FILTER","Set","NEXT_TRACE_UPLOAD_DEBUG","process","env","traceUploadUrl","mode","_isTurboSession","projectDir","distDir","argv","isTurboSession","upload","projectPkgJsonPath","findUp","assert","projectPkgJson","JSON","parse","fsPromise","readFile","pkgName","name","commit","child_process","spawnSync","os","platform","shell","stdout","toString","trimEnd","readLineInterface","createInterface","input","createReadStream","path","join","crlfDelay","Infinity","traces","Map","line","lineEvents","event","parentId","undefined","has","tags","trigger","isAbsolute","relative","replaceAll","sep","trace","get","traceId","set","push","body","metadata","arch","cpus","length","values","console","log","stringify","res","fetch","method","headers","status","json"],"mappings":";;;;+DAAmB;iEACG;sEACI;+DACP;kEAED;2DACH;0BACiB;oBACC;6DAChB;;;;;;AAEjB,MAAMA,eAAe,IAAIC,IAAI;IAC3B;IACA;IACA;IACA;CACD;AAED,MAAM,EAAEC,wBAAuB,EAAE,GAAGC,QAAQC,GAAG;AAE/C,MAAM,KAAKC,gBAAgBC,MAAMC,iBAAiBC,YAAYC,QAAQ,GACpEN,QAAQO,IAAI;AACd,MAAMC,iBAAiBJ,oBAAoB;AA4BzC,CAAA,eAAeK,SAAS;IACxB,MAAMC,qBAAqB,MAAMC,IAAAA,eAAM,EAAC;IACxCC,IAAAA,eAAM,EAACF;IAEP,MAAMG,iBAAiBC,KAAKC,KAAK,CAC/B,MAAMC,iBAAS,CAACC,QAAQ,CAACP,oBAAoB;IAE/C,MAAMQ,UAAUL,eAAeM,IAAI;IAEnC,MAAMC,SAASC,sBAAa,CACzBC,SAAS,CACRC,WAAE,CAACC,QAAQ,OAAO,UAAU,YAAY,KAAK,EAC7C;QAAC;QAAa;KAAO,EACrB;QAAEC,OAAO,IAAI;IAAC,GAEfC,MAAM,CAACC,QAAQ,GACfC,OAAO;IAEV,MAAMC,oBAAoBC,IAAAA,yBAAe,EAAC;QACxCC,OAAOC,IAAAA,oBAAgB,EAACC,aAAI,CAACC,IAAI,CAAC7B,YAAYC,SAAS;QACvD6B,WAAWC;IACb;IAEA,MAAMC,SAAS,IAAIC;IACnB,WAAW,MAAMC,QAAQV,kBAAmB;QAC1C,MAAMW,aAA2B1B,KAAKC,KAAK,CAACwB;QAC5C,KAAK,MAAME,SAASD,WAAY;YAC9B,IACE,4BAA4B;YAC5BC,MAAMC,QAAQ,KAAKC,aACnB9C,aAAa+C,GAAG,CAACH,MAAMtB,IAAI,GAC3B;gBACA,IACE,OAAOsB,MAAMI,IAAI,CAACC,OAAO,KAAK,YAC9Bb,aAAI,CAACc,UAAU,CAACN,MAAMI,IAAI,CAACC,OAAO,GAClC;oBACAL,MAAMI,IAAI,CAACC,OAAO,GAChB,eACAb,aAAI,CACDe,QAAQ,CAAC3C,YAAYoC,MAAMI,IAAI,CAACC,OAAO,EACvCG,UAAU,CAAChB,aAAI,CAACiB,GAAG,EAAE;gBAC5B,CAAC;gBAED,IAAIC,QAAQd,OAAOe,GAAG,CAACX,MAAMY,OAAO;gBACpC,IAAIF,UAAUR,WAAW;oBACvBQ,QAAQ,EAAE;oBACVd,OAAOiB,GAAG,CAACb,MAAMY,OAAO,EAAEF;gBAC5B,CAAC;gBACDA,MAAMI,IAAI,CAACd;YACb,CAAC;QACH;IACF;IAEA,MAAMe,OAAyB;QAC7BC,UAAU;YACRrC;YACAjB;YACAe;YACAV;YACAkD,MAAMnC,WAAE,CAACmC,IAAI;YACbC,MAAMpC,WAAE,CAACoC,IAAI,GAAGC,MAAM;YACtBpC,UAAUD,WAAE,CAACC,QAAQ;QACvB;QACAa,QAAQ;eAAIA,OAAOwB,MAAM;SAAG;IAC9B;IAEA,IAAI9D,yBAAyB;QAC3B+D,QAAQC,GAAG,CAAC,6BAA6BjD,KAAKkD,SAAS,CAACR,MAAM,IAAI,EAAE;IACtE,CAAC;IAED,IAAIS,MAAM,MAAMC,IAAAA,kBAAK,EAAChE,gBAAgB;QACpCiE,QAAQ;QACRC,SAAS;YACP,gBAAgB;QAClB;QACAZ,MAAM1C,KAAKkD,SAAS,CAACR;IACvB;IAEA,IAAIzD,yBAAyB;QAC3B+D,QAAQC,GAAG,CAAC,qBAAqBE,IAAII,MAAM,EAAE,MAAMJ,IAAIK,IAAI;IAC7D,CAAC;AACH,CAAA"}
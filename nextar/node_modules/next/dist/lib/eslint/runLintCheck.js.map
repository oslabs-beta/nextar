{"version":3,"sources":["../../../src/lib/eslint/runLintCheck.ts"],"names":["runLintCheck","VALID_SEVERITY","isValidSeverity","severity","includes","requiredPackages","file","pkg","exportsRestrict","cliPrompt","console","log","chalk","bold","cyan","cliSelect","Promise","resolve","require","default","value","values","ESLINT_PROMPT_VALUES","valueRenderer","title","recommended","selected","name","underline","yellow","unselected","config","lint","baseDir","lintDirs","eslintrcFile","pkgJsonPath","hasAppDir","lintDuringBuild","eslintOptions","reportErrorsOnly","maxWarnings","formatter","outputFile","mod","ESLint","deps","hasNecessaryDependencies","packageManager","getPkgManager","missing","some","dep","Log","error","resolved","get","eslintVersion","version","CLIEngine","semver","lt","red","options","useEslintrc","baseConfig","errorOnUnmatchedPattern","extensions","cache","eslint","nextEslintPluginIsEnabled","nextRulesEnabled","Map","configFile","completeConfig","calculateConfigForFile","plugins","Object","entries","rules","startsWith","length","set","pagesDir","findPagesDir","pagesDirRules","updatedPagesDir","rule","replace","warn","lintStart","process","hrtime","results","lintFiles","selectedFormatter","fix","outputFixes","getErrorResults","loadFormatter","formattedResult","formatResults","format","lintEnd","totalWarnings","reduce","sum","warningCount","writeOutputFile","output","outputWithMessages","isError","eventInfo","durationInSeconds","lintedFilesCount","lintFix","nextEslintPluginVersion","has","path","join","dirname","nextEslintPluginErrorsCount","totalNextPluginErrorCount","nextEslintPluginWarningsCount","totalNextPluginWarningCount","fromEntries","err","message","getProperError","opts","strict","findUp","cwd","packageJsonConfig","pkgJsonContent","fs","readFile","encoding","CommentJson","parse","hasEslintConfiguration","exists","emptyPkgJsonConfig","emptyEslintrc","selectedConfig","find","opt","installDependencies","existsSync","writeDefaultConfig","ready"],"mappings":"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"}
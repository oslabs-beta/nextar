{"version":3,"sources":["../../../src/server/api-utils/index.ts"],"names":["getCookieParser","sendStatusCode","redirect","checkIsOnDemandRevalidate","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","RESPONSE_LIMIT_DEFAULT","SYMBOL_PREVIEW_DATA","SYMBOL_CLEARED_COOKIES","clearPreviewData","ApiError","sendError","setLazyProp","headers","parseCookie","cookie","parse","parseCookieFn","require","Array","isArray","join","res","statusCode","statusOrUrl","url","Error","writeHead","Location","write","end","req","previewProps","HeadersAdapter","from","previewModeId","get","PRERENDER_REVALIDATE_HEADER","isOnDemandRevalidate","revalidateOnlyGenerated","has","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","Symbol","options","serialize","previous","getHeader","setHeader","expires","Date","httpOnly","sameSite","process","env","NODE_ENV","secure","path","undefined","Object","defineProperty","value","enumerable","constructor","message","statusMessage","prop","getter","opts","configurable","optsReset","writable","set"],"mappings":"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"}
{"version":3,"sources":["../../../src/server/lib/route-resolver.ts"],"names":["makeResolver","debug","setupDebug","dir","nextConfig","middleware","hostname","port","fsChecker","setupFsCheck","dev","minimalMode","config","appDir","pagesDir","findPagesDir","experimental","fetchHostname","formatHostname","ensureCallback","item","result","type","Error","findPageFile","itemPath","pageExtensions","distDir","path","join","middlewareInfo","name","paths","files","map","file","process","cwd","wasm","assets","middlewareServerAddr","Promise","resolve","srv","http","createServer","req","res","cloneableBody","getCloneableBody","run","require","edgeFunctionEntry","request","headers","method","i18n","basePath","trailingSlash","url","body","signal","signalFromNodeResponse","useCache","onWarning","console","warn","key","value","response","toLowerCase","delete","cookies","splitCookiesString","cookie","append","Object","entries","toNodeOutgoingHttpHeaders","undefined","setHeader","statusCode","status","pipeReadable","end","err","error","on","srvAddr","address","listen","length","middlewareMatcher","getMiddlewareRouteMatcher","matcher","regexp","originalSource","resolveRoutes","getResolveRoutes","isNodeDebugging","workerType","pages","initialize","deleteCache","clearModuleContext","deleteAppClientCache","propagateServerField","resolveRoute","routeResult","Set","matchedOutput","bodyStream","parsedUrl","resHeaders","finished","pathname","query","keys","destination","format","PERMANENT_REDIRECT_STATUS","protocol","getRequestMeta","proxyRequest","cloneBodyStream","proxyTimeout"],"mappings":"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"}
{"version":3,"sources":["../../src/server/body-streams.ts"],"names":["requestToBodyStream","getCloneableBody","context","KUint8Array","stream","ReadableStream","start","controller","on","chunk","enqueue","Uint8Array","close","err","error","replaceRequestBody","base","key","v","bind","readable","buffered","endPromise","Promise","resolve","reject","catch","finalize","res","cloneBodyStream","input","p1","PassThrough","p2","push"],"mappings":";;;;;;;;;;;;;;;IAGgBA,mBAAmB;eAAnBA;;IAoCAC,gBAAgB;eAAhBA;;;wBAtCsB;AAE/B,SAASD,oBACdE,OAAkD,EAClDC,WAA8B,EAC9BC,MAAgB,EAChB;IACA,OAAO,IAAIF,QAAQG,cAAc,CAAC;QAChCC,OAAMC,UAAU,EAAE;YAChBH,OAAOI,EAAE,CAAC,QAAQ,CAACC,QACjBF,WAAWG,OAAO,CAAC,IAAIP,YAAY;uBAAI,IAAIQ,WAAWF;iBAAO;YAE/DL,OAAOI,EAAE,CAAC,OAAO,IAAMD,WAAWK,KAAK;YACvCR,OAAOI,EAAE,CAAC,SAAS,CAACK,MAAQN,WAAWO,KAAK,CAACD;QAC/C;IACF;AACF;AAEA,SAASE,mBACPC,IAAO,EACPZ,MAAgB,EACb;IACH,IAAK,MAAMa,OAAOb,OAAQ;QACxB,IAAIc,IAAId,MAAM,CAACa,IAAsB;QACrC,IAAI,OAAOC,MAAM,YAAY;YAC3BA,IAAIA,EAAEC,IAAI,CAACH;QACb,CAAC;QACDA,IAAI,CAACC,IAAe,GAAGC;IACzB;IAEA,OAAOF;AACT;AAOO,SAASf,iBACdmB,QAAW,EACI;IACf,IAAIC,WAA4B,IAAI;IAEpC,MAAMC,aAAa,IAAIC,QACrB,CAACC,SAASC,SAAW;QACnBL,SAASZ,EAAE,CAAC,OAAOgB;QACnBJ,SAASZ,EAAE,CAAC,SAASiB;IACvB,GACAC,KAAK,CAAC,CAACZ,QAAU;QACjB,OAAO;YAAEA;QAAM;IACjB;IAEA,OAAO;QACL;;;;KAIC,GACD,MAAMa,YAA0B;YAC9B,IAAIN,UAAU;gBACZ,MAAMO,MAAM,MAAMN;gBAElB,IAAIM,OAAO,OAAOA,QAAQ,YAAYA,IAAId,KAAK,EAAE;oBAC/C,MAAMc,IAAId,KAAK,CAAA;gBACjB,CAAC;gBACDC,mBAAmBK,UAAUC;gBAC7BA,WAAWD;YACb,CAAC;QACH;QACA;;;KAGC,GACDS,mBAAkB;YAChB,MAAMC,QAAQT,YAAYD;YAC1B,MAAMW,KAAK,IAAIC,mBAAW;YAC1B,MAAMC,KAAK,IAAID,mBAAW;YAC1BF,MAAMtB,EAAE,CAAC,QAAQ,CAACC,QAAU;gBAC1BsB,GAAGG,IAAI,CAACzB;gBACRwB,GAAGC,IAAI,CAACzB;YACV;YACAqB,MAAMtB,EAAE,CAAC,OAAO,IAAM;gBACpBuB,GAAGG,IAAI,CAAC,IAAI;gBACZD,GAAGC,IAAI,CAAC,IAAI;YACd;YACAb,WAAWY;YACX,OAAOF;QACT;IACF;AACF"}
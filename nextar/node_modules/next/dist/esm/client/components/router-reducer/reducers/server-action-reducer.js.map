{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/server-action-reducer.ts"],"names":["callServer","NEXT_ROUTER_STATE_TREE","NEXT_URL","RSC_CONTENT_TYPE_HEADER","createRecordFromThenable","readRecordValue","createFromFetch","encodeReply","addBasePath","createHrefFromUrl","handleExternalUrl","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","CacheStates","handleMutable","fillLazyItemsTillLeafWithHead","fetchServerAction","state","actionId","actionArgs","body","res","fetch","method","headers","Accept","encodeURIComponent","JSON","stringify","tree","process","env","__NEXT_ACTIONS_DEPLOYMENT_ID","NEXT_DEPLOYMENT_ID","nextUrl","location","get","revalidatedParts","revalidatedHeader","parse","paths","tag","cookie","e","redirectLocation","URL","window","origin","undefined","isFlightResponse","response","Promise","resolve","actionFlightData","actionResult","serverActionReducer","action","mutable","cache","reject","href","canonicalUrl","currentTree","isForCurrentTree","previousTree","inFlightServerAction","flightData","actionResultResolved","pushRef","pendingPush","flightDataPath","length","console","log","treePatch","newTree","Error","subTreeData","head","slice","status","READY","prefetchCache","Map","patchedTree","newHref","value"],"mappings":"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"}
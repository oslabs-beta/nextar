{"version":3,"sources":["../../src/server/body-streams.ts"],"names":["PassThrough","requestToBodyStream","context","KUint8Array","stream","ReadableStream","start","controller","on","chunk","enqueue","Uint8Array","close","err","error","replaceRequestBody","base","key","v","bind","getCloneableBody","readable","buffered","endPromise","Promise","resolve","reject","catch","finalize","res","cloneBodyStream","input","p1","p2","push"],"mappings":"AACA,SAASA,WAAW,QAAkB,SAAQ;AAE9C,OAAO,SAASC,oBACdC,OAAkD,EAClDC,WAA8B,EAC9BC,MAAgB,EAChB;IACA,OAAO,IAAIF,QAAQG,cAAc,CAAC;QAChCC,OAAMC,UAAU,EAAE;YAChBH,OAAOI,EAAE,CAAC,QAAQ,CAACC,QACjBF,WAAWG,OAAO,CAAC,IAAIP,YAAY;uBAAI,IAAIQ,WAAWF;iBAAO;YAE/DL,OAAOI,EAAE,CAAC,OAAO,IAAMD,WAAWK,KAAK;YACvCR,OAAOI,EAAE,CAAC,SAAS,CAACK,MAAQN,WAAWO,KAAK,CAACD;QAC/C;IACF;AACF,CAAC;AAED,SAASE,mBACPC,IAAO,EACPZ,MAAgB,EACb;IACH,IAAK,MAAMa,OAAOb,OAAQ;QACxB,IAAIc,IAAId,MAAM,CAACa,IAAsB;QACrC,IAAI,OAAOC,MAAM,YAAY;YAC3BA,IAAIA,EAAEC,IAAI,CAACH;QACb,CAAC;QACDA,IAAI,CAACC,IAAe,GAAGC;IACzB;IAEA,OAAOF;AACT;AAOA,OAAO,SAASI,iBACdC,QAAW,EACI;IACf,IAAIC,WAA4B,IAAI;IAEpC,MAAMC,aAAa,IAAIC,QACrB,CAACC,SAASC,SAAW;QACnBL,SAASb,EAAE,CAAC,OAAOiB;QACnBJ,SAASb,EAAE,CAAC,SAASkB;IACvB,GACAC,KAAK,CAAC,CAACb,QAAU;QACjB,OAAO;YAAEA;QAAM;IACjB;IAEA,OAAO;QACL;;;;KAIC,GACD,MAAMc,YAA0B;YAC9B,IAAIN,UAAU;gBACZ,MAAMO,MAAM,MAAMN;gBAElB,IAAIM,OAAO,OAAOA,QAAQ,YAAYA,IAAIf,KAAK,EAAE;oBAC/C,MAAMe,IAAIf,KAAK,CAAA;gBACjB,CAAC;gBACDC,mBAAmBM,UAAUC;gBAC7BA,WAAWD;YACb,CAAC;QACH;QACA;;;KAGC,GACDS,mBAAkB;YAChB,MAAMC,QAAQT,YAAYD;YAC1B,MAAMW,KAAK,IAAIhC;YACf,MAAMiC,KAAK,IAAIjC;YACf+B,MAAMvB,EAAE,CAAC,QAAQ,CAACC,QAAU;gBAC1BuB,GAAGE,IAAI,CAACzB;gBACRwB,GAAGC,IAAI,CAACzB;YACV;YACAsB,MAAMvB,EAAE,CAAC,OAAO,IAAM;gBACpBwB,GAAGE,IAAI,CAAC,IAAI;gBACZD,GAAGC,IAAI,CAAC,IAAI;YACd;YACAZ,WAAWW;YACX,OAAOD;QACT;IACF;AACF,CAAC"}
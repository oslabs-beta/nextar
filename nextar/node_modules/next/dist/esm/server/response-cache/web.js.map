{"version":3,"sources":["../../../src/server/response-cache/web.ts"],"names":["WebResponseCache","constructor","minimalMode","pendingResponses","Map","get","key","responseGenerator","context","pendingResponseKey","isOnDemandRevalidate","pendingResponse","resolver","rejecter","promise","Promise","resolve","reject","set","resolved","cacheEntry","previousCacheItem","expiresAt","Date","now","entry","delete","resolveValue","isMiss","revalidate","undefined","err","console","error"],"mappings":"AAEA;;;CAGC,GACD,eAAe,MAAMA;IASnBC,YAAYC,WAAoB,CAAE;QAChC,IAAI,CAACC,gBAAgB,GAAG,IAAIC;QAC5B,IAAI,CAACF,WAAW,GAAGA;IACrB;IAEOG,IACLC,GAAkB,EAClBC,iBAAoC,EACpCC,OAIC,EACmC;YA6ClC;QA5CF,4DAA4D;QAC5D,MAAMC,qBAAqBH,MACvB,CAAC,EAAEA,IAAI,CAAC,EAAEE,QAAQE,oBAAoB,GAAG,MAAM,GAAG,CAAC,CAAC,GACpD,IAAI;QAER,MAAMC,kBAAkBF,qBACpB,IAAI,CAACN,gBAAgB,CAACE,GAAG,CAACI,sBAC1B,IAAI;QACR,IAAIE,iBAAiB;YACnB,OAAOA;QACT,CAAC;QAED,IAAIC,WAA4D,IAAM,CAAC;QACvE,IAAIC,WAAmC,IAAM,CAAC;QAC9C,MAAMC,UAA8C,IAAIC,QACtD,CAACC,SAASC,SAAW;YACnBL,WAAWI;YACXH,WAAWI;QACb;QAEF,IAAIR,oBAAoB;YACtB,IAAI,CAACN,gBAAgB,CAACe,GAAG,CAACT,oBAAoBK;QAChD,CAAC;QAED,IAAIK,WAAW,KAAK;QACpB,MAAMH,UAAU,CAACI,aAA0C;YACzD,IAAIX,oBAAoB;gBACtB,wDAAwD;gBACxD,IAAI,CAACN,gBAAgB,CAACe,GAAG,CACvBT,oBACAM,QAAQC,OAAO,CAACI;YAEpB,CAAC;YACD,IAAI,CAACD,UAAU;gBACbA,WAAW,IAAI;gBACfP,SAASQ;YACX,CAAC;QACH;QAEA,sDAAsD;QACtD,yDAAyD;QACzD,IACEX,sBACA,IAAI,CAACP,WAAW,IAChB,CAAA,CAAA,0BAAA,IAAI,CAACmB,iBAAiB,YAAtB,KAAA,IAAA,wBAAwBf,GAAG,AAAD,MAAMG,sBAChC,IAAI,CAACY,iBAAiB,CAACC,SAAS,GAAGC,KAAKC,GAAG,IAC3C;YACAR,QAAQ,IAAI,CAACK,iBAAiB,CAACI,KAAK;YACpC,IAAI,CAACtB,gBAAgB,CAACuB,MAAM,CAACjB;YAC7B,OAAOK;QACT,CAAC;QAKC,CAAA,UAAY;YACZ,IAAI;gBACF,MAAMM,aAAa,MAAMb,kBAAkBY;gBAC3C,MAAMQ,eACJP,eAAe,IAAI,GACf,IAAI,GACJ;oBACE,GAAGA,UAAU;oBACbQ,QAAQ,IAAI;gBACd,CAAC;gBAEP,8DAA8D;gBAC9D,IAAI,CAACpB,QAAQE,oBAAoB,EAAE;oBACjCM,QAAQW;gBACV,CAAC;gBAED,IAAIrB,OAAOc,cAAc,OAAOA,WAAWS,UAAU,KAAK,aAAa;oBACrE,IAAI,CAACR,iBAAiB,GAAG;wBACvBf,KAAKG,sBAAsBH;wBAC3BmB,OAAOL;wBACPE,WAAWC,KAAKC,GAAG,KAAK;oBAC1B;gBACF,OAAO;oBACL,IAAI,CAACH,iBAAiB,GAAGS;gBAC3B,CAAC;gBAED,IAAItB,QAAQE,oBAAoB,EAAE;oBAChCM,QAAQW;gBACV,CAAC;YACH,EAAE,OAAOI,KAAK;gBACZ,0DAA0D;gBAC1D,4DAA4D;gBAC5D,IAAIZ,UAAU;oBACZa,QAAQC,KAAK,CAACF;gBAChB,OAAO;oBACLlB,SAASkB;gBACX,CAAC;YACH,SAAU;gBACR,IAAItB,oBAAoB;oBACtB,IAAI,CAACN,gBAAgB,CAACuB,MAAM,CAACjB;gBAC/B,CAAC;YACH;QACF,CAAA;QACA,OAAOK;IACT;AACF,CAAC"}
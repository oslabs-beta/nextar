{"version":3,"sources":["../../../src/server/api-utils/index.ts"],"names":["HeadersAdapter","PRERENDER_REVALIDATE_HEADER","PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER","getCookieParser","headers","parseCookie","cookie","parse","parseCookieFn","require","Array","isArray","join","sendStatusCode","res","statusCode","redirect","statusOrUrl","url","Error","writeHead","Location","write","end","checkIsOnDemandRevalidate","req","previewProps","from","previewModeId","get","isOnDemandRevalidate","revalidateOnlyGenerated","has","COOKIE_NAME_PRERENDER_BYPASS","COOKIE_NAME_PRERENDER_DATA","RESPONSE_LIMIT_DEFAULT","SYMBOL_PREVIEW_DATA","Symbol","SYMBOL_CLEARED_COOKIES","clearPreviewData","options","serialize","previous","getHeader","setHeader","expires","Date","httpOnly","sameSite","process","env","NODE_ENV","secure","path","undefined","Object","defineProperty","value","enumerable","ApiError","constructor","message","sendError","statusMessage","setLazyProp","prop","getter","opts","configurable","optsReset","writable","set"],"mappings":"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"}
{"version":3,"sources":["../../../../src/server/lib/incremental-cache/fetch-cache.ts"],"names":["LRUCache","FETCH_CACHE_HEADER","CACHE_ONE_YEAR","getDerivedTags","memoryCache","rateLimitedUntil","FetchCache","isAvailable","ctx","_requestHeaders","process","env","SUSPENSE_CACHE_URL","constructor","debug","NEXT_PRIVATE_DEBUG_CACHE","headers","revalidatedTags","newHeaders","JSON","parse","k","scHost","scBasePath","SUSPENSE_CACHE_BASEPATH","SUSPENSE_CACHE_AUTH_TOKEN","cacheEndpoint","console","log","maxMemoryCacheSize","max","length","value","kind","stringify","props","Error","data","body","html","pageData","revalidateTag","tag","Date","now","res","fetch","method","next","internal","status","retryAfter","get","parseInt","ok","err","warn","key","fetchCache","fetchUrl","fetchIdx","lastModified","undefined","start","fetchParams","fetchType","error","text","cached","json","cacheState","age","Object","keys","set","innerData","derivedTags","tags","some","includes","revalidate","toString","join"],"mappings":"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"}
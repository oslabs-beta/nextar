{"version":3,"sources":["../../../../src/server/lib/router-utils/filesystem.ts"],"names":["path","fs","Log","setupDebug","LRUCache","loadCustomRoutes","modifyRouteRegex","FileType","fileExists","recursiveReadDir","isDynamicRoute","escapeStringRegexp","getPathMatch","getRouteRegex","getRouteMatcher","pathHasPrefix","normalizeLocalePath","removePathPrefix","getMiddlewareRouteMatcher","APP_PATH_ROUTES_MANIFEST","BUILD_ID_FILE","MIDDLEWARE_MANIFEST","PAGES_MANIFEST","PRERENDER_MANIFEST","ROUTES_MANIFEST","normalizePathSep","debug","buildCustomRoute","type","item","basePath","caseSensitive","restrictedRedirectPaths","map","p","match","source","strict","removeUnnamedParams","regexModifier","internal","regex","undefined","sensitive","check","setupFsCheck","opts","getItemsLru","max","length","value","key","fsPath","itemPath","nextDataRoutes","Set","publicFolderItems","nextStaticFolderItems","legacyStaticFolderItems","appFiles","pageFiles","dynamicRoutes","middlewareMatcher","distDir","join","dir","config","publicFolderPath","nextStaticFolderPath","legacyStaticFolderPath","customRoutes","redirects","rewrites","beforeFiles","afterFiles","fallback","headers","buildId","prerenderManifest","dev","middlewareManifest","buildIdPath","readFile","file","add","encodeURI","err","code","warn","posix","output","routesManifestPath","prerenderManifestPath","middlewareManifestPath","pagesManifestPath","appRoutesManifestPath","routesManifest","JSON","parse","catch","pagesManifest","appRoutesManifest","Object","keys","i18n","locales","pathname","escapedBuildId","route","dataRoutes","page","routeRegex","push","re","toString","RegExp","dataRouteRegex","replace","groups","middleware","matchers","Array","isArray","version","routes","notFoundRoutes","preview","previewModeId","require","randomBytes","previewModeSigningKey","previewModeEncryptionKey","experimental","caseSensitiveRoutes","handleLocale","locale","i18nResult","detectedLocale","ensureFn","interceptionRoutes","devVirtualFsItems","ensureCallback","fn","getItem","originalItemPath","itemKey","lruResult","get","minimalMode","endsWith","substring","decodedItemPath","decodeURIComponent","_","itemsToCheck","items","curItemPath","curDecodedItemPath","isDynamicOutput","localeResult","defaultLocale","nextDataPrefix","startsWith","curLocaleResult","has","matchedItem","itemsRoot","isStaticAsset","includes","found","File","tempItemPath","itemResult","set","getDynamicRoutes","getMiddlewareMatchers"],"mappings":"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"}
{"version":3,"sources":["../../../src/server/lib/mock-request.ts"],"names":["Stream","fromNodeOutgoingHttpHeaders","toNodeOutgoingHttpHeaders","MockedRequest","Readable","constructor","url","headers","method","socket","httpVersion","httpVersionMajor","httpVersionMinor","Proxy","get","_target","prop","Error","headersDistinct","key","value","Object","entries","Array","isArray","_read","emit","connection","aborted","complete","trailers","trailersDistinct","rawTrailers","rawHeaders","setTimeout","MockedResponse","Writable","res","statusMessage","finished","headersSent","buffers","statusCode","Headers","hasStreamed","Promise","resolve","reject","on","err","appendHeader","name","values","v","append","isSent","write","chunk","push","Buffer","isBuffer","from","end","arguments","_implicitHeader","_write","_encoding","callback","writeHead","length","i","setHeader","hasHeader","has","getHeader","undefined","getHeaders","getHeaderNames","keys","delete","set","toString","removeHeader","strictContentLength","writeEarlyHints","req","assignSocket","detachSocket","writeContinue","writeProcessing","upgrading","chunkedEncoding","shouldKeepAlive","useChunkedEncodingByDefault","sendDate","addTrailers","flushHeaders","createRequestResponseMocks"],"mappings":"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"}
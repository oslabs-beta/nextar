{"version":3,"sources":["../../../../src/build/webpack/plugins/flight-client-entry-plugin.ts"],"names":["webpack","stringify","path","sources","getInvalidator","getEntries","EntryTypes","getEntryKey","WEBPACK_LAYERS","APP_CLIENT_INTERNALS","COMPILER_NAMES","EDGE_RUNTIME_WEBPACK","SERVER_REFERENCE_MANIFEST","generateActionId","getActions","isClientComponentEntryModule","isCSSMod","traverseModules","forEachEntryModule","normalizePathSep","getProxiedPluginState","PLUGIN_NAME","pluginState","serverActions","edgeServerActions","actionModServerId","actionModEdgeServerId","serverModuleIds","edgeServerModuleIds","ASYNC_CLIENT_MODULES","injectedClientEntries","deduplicateCSSImportsForEntry","mergedCSSimports","sortedCSSImports","Object","entries","sort","a","b","aPath","bPath","aDepth","split","length","bDepth","aName","parse","name","bName","indexA","indexOf","indexB","dedupedCSSImports","trackedCSSImports","Set","entryName","cssImports","cssImport","has","filename","includes","add","push","FlightClientEntryPlugin","constructor","options","dev","appDir","isEdgeServer","useServerActions","serverActionsBodySizeLimit","assetPrefix","apply","compiler","hooks","compilation","tap","normalModuleFactory","dependencyFactories","set","dependencies","ModuleDependency","dependencyTemplates","NullDependency","Template","finishMake","tapPromise","createClientEntries","afterCompile","recordModule","modId","mod","modPath","matchResource","resourceResolveData","modQuery","query","modResource","resource","layer","serverSideRendering","ssrNamedModuleId","relative","context","startsWith","replace","_chunk","_chunkGroup","request","buildInfo","rsc","moduleGraph","isAsync","String","make","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_OPTIMIZE_HASH","assets","createActionAssets","addClientEntryAndSSRModulesList","createdSSRDependenciesForEntry","addActionEntryList","actionMapsPerEntry","entryModule","internalClientComponentEntryImports","actionEntryImports","Map","clientEntriesToInject","connection","getOutgoingConnections","entryRequest","dependency","clientComponentImports","actionImports","collectComponentInfoFromServerEntryDependency","resolvedModule","forEach","dep","names","isAbsoluteRequest","isAbsolute","value","relativeRequest","bundlePath","assign","absolutePagePath","clientEntryToInject","injected","injectClientEntryAndSSRModules","clientImports","size","createdActions","actionNames","actionName","injectActionEntry","actions","finishModules","addedClientActionEntryList","actionMapsPerClientEntry","ssrEntryDepdendencies","collectClientActionsFromDependencies","remainingClientImportedActions","remainingActionEntryImports","remainingActionNames","id","fromClient","Promise","all","invalidator","outputPath","some","shouldInvalidate","invalidate","client","map","addClientEntryAndSSRModules","collectedActions","visitedModule","visitedEntry","collectActions","collectActionsInDep","modRequest","entryDependency","ssrEntryModule","getResolvedModule","visited","CSSImports","filterClientComponents","isCSS","_identifier","sideEffectFree","factoryMeta","unused","getExportsInfo","isModuleUsed","Array","from","loaderOptions","modules","server","clientLoader","importPath","sep","clientSSRLoader","pageKey","type","CHILD_ENTRY","parentEntries","absoluteEntryFilePath","dispose","lastActiveTime","Date","now","entryData","clientComponentEntryDep","EntryPlugin","createDependency","addEntry","actionsArray","actionLoader","JSON","__client_imported__","currentCompilerServerActions","p","workers","actionBrowser","reactServerComponents","actionEntryDep","resolve","reject","entry","get","includeDependencies","call","addModuleTree","contextInfo","issuerLayer","err","module","failedEntry","succeedEntry","chunkGroup","test","mapping","action","json","node","edge","undefined","RawSource"],"mappings":"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"}